# Pipleine for deploying multiple pods supporting a single persona

trigger:
  - none

pr:
  - none

pool:
  name: Hosted Windows 2019 with VS2019
  demands: azureps

parameters:

  - name: targetContainer
    displayName: Target Host Container
    type: string
    values:
      - BLUE
      - GREEN

  - name: image
    displayName: Image
    type: string
    default: PR01-WIN10-1909-0620

variables:
  - template: pipeline/vars.yml

extends:
  template: pipeline/wvd-pipeline.yml
  parameters:
    personaId: PR02
    personaName: Developers
    primaryRegion: canadacentral
    primaryRegionCode: CACN
    image: ${{ parameters.image }}
    primaryKeyVault: PR02-CACN-KVL
    primaryNetAppInstance: WVD-CACN-NETAPP-PR02
    primaryNetAppCapacity: PR02-CACN-CPOOL
    primaryNetAppVolume: PR02-CACN-VOL
    targetContainer: ${{ parameters.targetContainer }}
    pods:
      - podId: POD01
        numberOfVMs: 3
      - podId: POD02
        numberOfVMs: 2
      - podId: POD03
        numberOfVMs: 2

